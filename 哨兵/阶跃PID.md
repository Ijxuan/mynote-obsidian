阶跃PID，是在双环PID参数整定的过程中用到的一种方法

先看双环PID

直接控制电机的内环
速度环是内环，角度环是外环

控制流程如下：
读取电机当前的角度和速度

当前角度和目标角度   进行PID运算   输出一个速度目标值

当前速度和目标速度  进行PID运算    输出一个控制电压/电流

电调根据接收控制电压/电流，根据这个值控制电机，然后又将电机的速度和角度值反馈给单片机

说回阶跃调PID，阶跃是目标角度的阶跃，具体表现为一般需要让电机转2圈左右
阶跃，阶跃，是目标角度的阶跃，目标角度阶跃的一瞬间，目标速度也会跟着阶跃，然后到目标角度附近时，目标速度也会很小，就是一个越接近目标，速度目标值就越小

看下图青色线，是目标速度曲线
灰色是反馈回来的速度值
![[1.png]]
可以看到目标速度突变到最大值再慢慢下降
但是真实速度始终没有达到最大速度
这个时候就可以引入第一个需要调整的值了：阶跃多少？

之前说的是让电机转2圈左右，那么根据实际表现，目标速度维持在最大速度的区间太短了，增大阶跃，让目标角度从0突变到20000变成从0突变到30000
调整后，应该要做到：
![[2.png]]
这个时候发现越是接近目标速度，速度增长越慢，给人一种无力的感觉
这时候可以去看看速度环的输出：
![[3.png]]
浅绿色是总输出，瞬间